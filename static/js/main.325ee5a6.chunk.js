(this.webpackJsonpktcapptool=this.webpackJsonpktcapptool||[]).push([[0],{129:function(e,t,n){},183:function(e,t,n){},185:function(e,t,n){},187:function(e,t,n){var a={"./amplify-amazon-button_5.entry.js":[251,16],"./amplify-auth-container.entry.js":[252,17],"./amplify-auth-fields_9.entry.js":[253,18],"./amplify-authenticator.entry.js":[254,5],"./amplify-button_3.entry.js":[255,19],"./amplify-chatbot.entry.js":[256,4],"./amplify-checkbox.entry.js":[257,20],"./amplify-confirm-sign-in_7.entry.js":[258,6],"./amplify-container.entry.js":[259,21],"./amplify-federated-buttons_2.entry.js":[260,22],"./amplify-federated-sign-in.entry.js":[261,23],"./amplify-form-field_4.entry.js":[262,24],"./amplify-greetings.entry.js":[263,25],"./amplify-icon-button.entry.js":[264,26],"./amplify-icon.entry.js":[265,7],"./amplify-link.entry.js":[266,27],"./amplify-nav_2.entry.js":[267,28],"./amplify-photo-picker.entry.js":[268,29],"./amplify-picker.entry.js":[269,30],"./amplify-radio-button_3.entry.js":[270,8],"./amplify-s3-album.entry.js":[271,9],"./amplify-s3-image-picker.entry.js":[272,10],"./amplify-s3-image.entry.js":[273,11],"./amplify-s3-text-picker.entry.js":[274,12],"./amplify-s3-text.entry.js":[275,13],"./amplify-select-mfa-type.entry.js":[276,31],"./amplify-sign-in-button.entry.js":[277,14],"./amplify-tooltip.entry.js":[278,32]};function c(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],c=t[0];return n.e(t[1]).then((function(){return n(c)}))}c.keys=function(){return Object.keys(a)},c.id=187,e.exports=c},196:function(e,t){},246:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(20),l=n.n(i),r=(n(183),n(31)),s=n.n(r),o=n(48),d=n(22),u=(n(185),n(129),n(341)),j=n(4),b=function(){return Object(j.jsxs)("header",{className:"main-header",children:[Object(j.jsx)("div",{className:"header-title",children:Object(j.jsx)("h1",{children:"KTC Management Tool"})}),Object(j.jsx)("div",{className:"header-signout",children:Object(j.jsx)(u.d,{})})]})},m=n(37),h=(n(89),n(340)),f=n(152),p=n(245),O=n(345),x=n(338),g=n(337),y=n(346),v=n(342),k=function(e){return Object(j.jsxs)(O.a,{fullWidth:!0,maxWidth:"sm",open:e.open,"aria-labelledby":"form-dialog-title",children:[Object(j.jsx)(y.a,{id:"form-dialog-title",children:"Add Notice"}),Object(j.jsx)(g.a,{children:Object(j.jsxs)("div",{className:"form-container",children:[Object(j.jsx)(h.a,{id:"outlined-basic",label:"Name",variant:"outlined",onChange:e.setName}),Object(j.jsx)(h.a,{id:"outlined-multiline-static",label:"Data",multiline:!0,rows:4,defaultValue:"",variant:"outlined",onChange:e.setData})]})}),Object(j.jsxs)(x.a,{children:[Object(j.jsx)(v.a,{onClick:e.handleClose,color:"primary",children:"Cancel"}),Object(j.jsx)(v.a,{onClick:e.handleAdd,color:"primary",children:"Add"})]})]})},w=Object(a.memo)(k),N=function(e){var t,n=Object(a.useState)(!1),c=Object(d.a)(n,2),i=c[0],l=c[1],r=Object(a.useState)(""),u=Object(d.a)(r,2),b=u[0],O=u[1],x=Object(a.useState)(""),g=Object(d.a)(x,2),y=g[0],v=g[1],k=Object(a.useState)(""),N=Object(d.a)(k,2),_=N[0],D=N[1],I=Object(a.useState)([]),S=Object(d.a)(I,2),C=S[0],T=S[1],$=Object(a.useState)(null),A=Object(d.a)($,2),F=A[0],q=A[1],M=Object(a.useState)({name:"",data:""}),E=Object(d.a)(M,2),H=E[0],L=E[1],U=function(){var t=Object(o.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.graphql(Object(p.b)("\n  query ListNotices(\n    $filter: ModelNoticeFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listNotices(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        year_group\n        notices {\n          cellID\n          name\n          time\n          data\n        }\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",{filter:{year_group:{eq:e.year_group}}}));case 3:n=t.sent,a=n.data.listNotices.items[0].notices,D(n.data.listNotices.items[0].id),T(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("error fetching data: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){U()}),[]);var W=function(){l(!1)},V=function(e,t){console.log(e," ",t);var n=H;"n"===t?n.name=e:"d"===t&&(n.data=e),L(n)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"display-table-container",children:Object(j.jsxs)("table",{className:"display-table",children:[Object(j.jsxs)("tr",{className:"table-header",children:[Object(j.jsxs)("td",{className:"table-title",colSpan:"2",children:[" ",Object(j.jsx)("h2",{children:"Notice Table"})," "]}),Object(j.jsx)("td",{children:Object(j.jsx)("button",(t={className:"table-save"},Object(m.a)(t,"className","row-buttons-save"),Object(m.a)(t,"onClick",(function(){f.a.graphql(Object(p.b)("\n  mutation UpdateNotice(\n    $input: UpdateNoticeInput!\n    $condition: ModelNoticeConditionInput\n  ) {\n    updateNotice(input: $input, condition: $condition) {\n      id\n      year_group\n      notices {\n        cellID\n        name\n        time\n        data\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",{input:{id:_,notices:C}})).catch((function(e){return console.log("Error saving changes: ",e)})).finally((function(){return console.log("changes saved")}))})),Object(m.a)(t,"children"," Save "),t))})]}),Object(j.jsx)("tr",{className:"second-notices",children:Object(j.jsx)("td",{colSpan:"3",children:Object(j.jsx)("button",{className:"add-button",onClick:function(){l(!0)},children:" Add Notice + "})})}),Object(j.jsxs)("tr",{className:"display-titles",children:[Object(j.jsx)("th",{style:{width:"20%"},children:"Title"}),Object(j.jsx)("th",{children:"Message"}),Object(j.jsx)("th",{children:"Date sent"})]}),C.map((function(e){return F===e.cellID?Object(j.jsxs)("tr",{onDoubleClick:function(){return function(e){console.log("made changes",H);var t=[];Object.keys(C).map((function(n){return console.log(n,e),n===e?(console.log(H.name),""!==H.name&&t.push({cellID:n.toString(),name:H.name,data:H.data,time:C[n].time})):t.push({cellID:n.toString(),name:C[n].name,data:C[n].data,time:C[n].time}),Object(j.jsx)(j.Fragment,{})})),T(t,q(null))}(e.cellID)},className:"all-row-data",children:[Object(j.jsx)("td",{children:Object(j.jsx)(h.a,{id:"outlined-multiline-static",label:"Name",fullWidth:!0,multiline:!0,rows:4,defaultValue:e.name,variant:"outlined",onChange:function(e){return V(e.target.value,"n")}})}),Object(j.jsx)("td",{children:Object(j.jsx)(h.a,{id:"outlined-multiline-static",label:"Data",fullWidth:!0,multiline:!0,rows:4,defaultValue:e.data,variant:"outlined",onChange:function(e){return V(e.target.value,"d")}})}),Object(j.jsxs)("td",{children:[" ",e.time," "]})]},e.cellID):Object(j.jsxs)("tr",{onDoubleClick:function(){return function(e){console.log("make changes",e),q(e);var t={name:C[e].name,data:C[e].data};L(t)}(e.cellID)},className:"all-row-data",children:[Object(j.jsxs)("td",{children:[" ",e.name," "]}),Object(j.jsxs)("td",{children:[" ",e.data," "]}),Object(j.jsxs)("td",{children:[" ",e.time," "]})]},e.cellID)}))]})}),Object(j.jsx)(w,{open:i,handleClose:W,handleAdd:function(){var e=(new Date).toLocaleString(),t={cellID:"x",name:b,data:y,time:e};C.unshift(t);var n=[];Object.keys(C).map((function(e){return n.push({cellID:e.toString(),name:C[e].name,data:C[e].data,time:C[e].time}),Object(j.jsx)(j.Fragment,{})})),T(n,W())},setName:function(e){O(e.target.value)},setData:function(e){v(e.target.value)}})]})},_=function(e){var t,n=Object(a.useState)(""),c=Object(d.a)(n,2),i=c[0],l=c[1],r=Object(a.useState)([]),u=Object(d.a)(r,2),b=u[0],O=u[1],x=Object(a.useState)(null),g=Object(d.a)(x,2),y=g[0],v=g[1],k=Object(a.useState)({name:"",data:""}),w=Object(d.a)(k,2),N=w[0],_=w[1],D=function(){var t=Object(o.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.graphql(Object(p.b)("\n  query ListHomework(\n    $filter: ModelHomeworkFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listHomework(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        year_group\n        homework {\n          cellID\n          name\n          time\n          data\n        }\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",{filter:{year_group:{eq:e.year_group}}}));case 3:n=t.sent,a=n.data.listHomework.items[0].homework,l(n.data.listHomework.items[0].id),O(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("error fetching data: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){D()}),[]);var I=function(e,t){console.log(e," ",t);var n=N;"n"===t?n.name=e:"d"===t&&(n.data=e),_(n)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"display-table-container",children:Object(j.jsxs)("table",{className:"display-table",children:[Object(j.jsxs)("tr",{className:"table-header",children:[Object(j.jsxs)("td",{className:"table-title",colSpan:"2",children:[" ",Object(j.jsx)("h2",{children:"Homework Table"})," "]}),Object(j.jsx)("td",{children:Object(j.jsx)("button",(t={className:"table-save"},Object(m.a)(t,"className","row-buttons-save"),Object(m.a)(t,"onClick",(function(){f.a.graphql(Object(p.b)("\n  mutation UpdateHomework(\n    $input: UpdateHomeworkInput!\n    $condition: ModelHomeworkConditionInput\n  ) {\n    updateHomework(input: $input, condition: $condition) {\n      id\n      year_group\n      homework {\n        cellID\n        name\n        time\n        data\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",{input:{id:i,homework:b}})).catch((function(e){return console.log("Error saving changes: ",e)})).finally((function(){return console.log("changes saved")}))})),Object(m.a)(t,"children"," Save "),t))})]}),Object(j.jsxs)("tr",{className:"display-titles",children:[Object(j.jsx)("th",{style:{width:"20%"},children:"Title"}),Object(j.jsx)("th",{children:"Message"}),Object(j.jsx)("th",{children:"Date sent"})]}),b.map((function(e){return y===e.cellID?Object(j.jsxs)("tr",{onDoubleClick:function(){return function(e){console.log("made changes",N);var t=[];Object.keys(b).map((function(n){return n===e?""!==N.name&&t.push({cellID:n.toString(),name:N.name,data:N.data,time:b[n].time}):t.push({cellID:n.toString(),name:b[n].name,data:b[n].data,time:b[n].time}),Object(j.jsx)(j.Fragment,{})})),O(t,v(null))}(e.cellID)},className:"all-row-data",children:[Object(j.jsx)("td",{children:Object(j.jsx)(h.a,{id:"outlined-multiline-static",label:"Name",fullWidth:!0,multiline:!0,rows:4,defaultValue:e.name,variant:"outlined",onChange:function(e){return I(e.target.value,"n")}})}),Object(j.jsx)("td",{children:Object(j.jsx)(h.a,{id:"outlined-multiline-static",label:"Data",fullWidth:!0,multiline:!0,rows:4,defaultValue:e.data,variant:"outlined",onChange:function(e){return I(e.target.value,"d")}})}),Object(j.jsxs)("td",{children:[" ",e.time," "]})]},e.cellID):Object(j.jsxs)("tr",{onDoubleClick:function(){return function(e){console.log("make changes",e),v(e);var t={name:b[e].name,data:b[e].data};_(t)}(e.cellID)},className:"all-row-data",children:[Object(j.jsxs)("td",{children:[" ",e.name," "]}),Object(j.jsxs)("td",{children:[" ",e.data," "]}),Object(j.jsxs)("td",{children:[" ",e.time," "]})]},e.cellID)}))]})})})},D=function(e){var t,n=Object(a.useState)(""),c=Object(d.a)(n,2),i=c[0],l=c[1],r=Object(a.useState)([]),u=Object(d.a)(r,2),b=u[0],O=u[1],x=Object(a.useState)(null),g=Object(d.a)(x,2),y=g[0],v=g[1],k=Object(a.useState)({name:"",data:""}),w=Object(d.a)(k,2),N=w[0],_=w[1],D=function(){var t=Object(o.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.graphql(Object(p.b)("\n  query ListTimetables(\n    $filter: ModelTimetableFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listTimetables(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        year_group\n        tables {\n          cellID\n          name\n          time\n          data\n        }\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",{filter:{year_group:{eq:e.year_group}}}));case 3:n=t.sent,a=n.data.listTimetables.items[0].tables,l(n.data.listTimetables.items[0].id),O(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("error fetching data: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){D()}),[]);var I=function(e,t){console.log(e," ",t);var n=N;"n"===t?n.name=e:"d"===t&&(n.data=e),_(n)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"display-table-container",children:Object(j.jsxs)("table",{className:"display-table",children:[Object(j.jsxs)("tr",{className:"table-header",children:[Object(j.jsxs)("td",{className:"table-title",colSpan:"2",children:[" ",Object(j.jsx)("h2",{children:"Timetables"})," "]}),Object(j.jsx)("td",{children:Object(j.jsx)("button",(t={className:"table-save"},Object(m.a)(t,"className","row-buttons-save"),Object(m.a)(t,"onClick",(function(){f.a.graphql(Object(p.b)("\n  mutation UpdateTimetable(\n    $input: UpdateTimetableInput!\n    $condition: ModelTimetableConditionInput\n  ) {\n    updateTimetable(input: $input, condition: $condition) {\n      id\n      year_group\n      tables {\n        cellID\n        name\n        time\n        data\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",{input:{id:i,tables:b}})).catch((function(e){return console.log("Error saving changes: ",e)})).finally((function(){return console.log("changes saved")}))})),Object(m.a)(t,"children"," Save "),t))})]}),Object(j.jsxs)("tr",{className:"display-titles",children:[Object(j.jsx)("th",{style:{width:"20%"},children:"Title"}),Object(j.jsx)("th",{children:"Message"}),Object(j.jsx)("th",{children:"Date sent"})]}),b.map((function(e){return y===e.cellID?Object(j.jsxs)("tr",{onDoubleClick:function(){return function(e){console.log("made changes",N);var t=[];Object.keys(b).map((function(n){return n===e?""!==N.name&&t.push({cellID:n.toString(),name:N.name,data:N.data,time:b[n].time}):t.push({cellID:n.toString(),name:b[n].name,data:b[n].data,time:b[n].time}),Object(j.jsx)(j.Fragment,{})})),O(t,v(null))}(e.cellID)},className:"all-row-data",children:[Object(j.jsx)("td",{children:Object(j.jsx)(h.a,{id:"outlined-multiline-static",label:"Name",fullWidth:!0,multiline:!0,rows:4,defaultValue:e.name,variant:"outlined",onChange:function(e){return I(e.target.value,"n")}})}),Object(j.jsx)("td",{children:Object(j.jsx)(h.a,{id:"outlined-multiline-static",label:"Data",fullWidth:!0,multiline:!0,rows:4,defaultValue:e.data,variant:"outlined",onChange:function(e){return I(e.target.value,"d")}})}),Object(j.jsxs)("td",{children:[" ",e.time," "]})]},e.cellID):Object(j.jsxs)("tr",{onDoubleClick:function(){return function(e){console.log("make changes",e),v(e);var t={name:b[e].name,data:b[e].data};_(t)}(e.cellID)},className:"all-row-data",children:[Object(j.jsxs)("td",{children:[" ",e.name," "]}),Object(j.jsxs)("td",{children:[" ",e.data," "]}),Object(j.jsxs)("td",{children:[" ",e.time," "]})]},e.cellID)}))]})})})},I=function(){var e=Object(a.useState)(1),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)("Notice"),l=Object(d.a)(i,2),r=l[0],s=l[1],o=function(e){console.log(e,r),c(e)},u=[1,2,3,4,5,6,7,8,9,10,11].map((function(e){return e===n?Object(j.jsx)("td",{className:"row-items",children:Object(j.jsxs)("button",{style:{backgroundColor:"#50eb79"},className:"row-buttons",onClick:function(){return o(e)},children:[" Year ",e]})},e):Object(j.jsx)("td",{className:"row-items",children:Object(j.jsxs)("button",{className:"row-buttons",onClick:function(){return o(e)},children:[" Year ",e]})},e)})),b=["Notice","Timetable","Homework"].map((function(e){return e===r?Object(j.jsx)("button",{style:{backgroundColor:"#50eb79"},onClick:function(){return s(e)},children:e},e):Object(j.jsx)("button",{onClick:function(){return s(e)},children:e},e)})),m=function(){return"Notice"===r?Object(j.jsx)(N,{year_group:n}):"Timetable"===r?Object(j.jsx)(D,{year_group:n}):"Homework"===r?Object(j.jsx)(_,{year_group:n}):void 0};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("table",{className:"main-table",children:[Object(j.jsx)("tbody",{children:Object(j.jsx)("tr",{className:"main-row",children:u})}),Object(j.jsx)("tr",{className:"table-nav",children:Object(j.jsx)("td",{children:b})})]}),Object(j.jsx)(m,{})]})},S=n(344),C=n(78),T=n(80),$={aws_project_region:"eu-west-2",aws_cognito_identity_pool_id:"eu-west-2:19803987-6272-4845-b7dd-a0113a46f275",aws_cognito_region:"eu-west-2",aws_user_pools_id:"eu-west-2_Ox0fmTLQ9",aws_user_pools_web_client_id:"7fcjn0sbnuh3dn0ephin3qlhdp",oauth:{},aws_appsync_graphqlEndpoint:"https://f7m2imxxtzffpbhvd7ift5dd2y.appsync-api.eu-west-2.amazonaws.com/graphql",aws_appsync_region:"eu-west-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS"};C.default.configure($);var A=Object(S.a)((function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.currentUserInfo().then((function(e){return c(e)})).catch((function(e){return console.log("error getting details",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var i=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error signing out: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return void 0!==n?Object(j.jsx)("div",{className:"App",children:"09f70b2f-7b02-4890-a64d-1208f972d85b"===n.attributes.sub?Object(j.jsxs)(j.Fragment,{children:[" ",Object(j.jsx)(b,{}),Object(j.jsx)(I,{})," "]}):Object(j.jsxs)(j.Fragment,{children:[" ",Object(j.jsx)("p",{children:" Please sign into the app instead"}),Object(j.jsx)("button",{onClick:i,children:" Signout "})," "]})}):Object(j.jsx)("p",{children:"Loading"})})),F=function(e){e&&e instanceof Function&&n.e(35).then(n.bind(null,360)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,l=t.getTTFB;n(e),a(e),c(e),i(e),l(e)}))};l.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root")),F()},89:function(e,t,n){}},[[246,2,3]]]);
//# sourceMappingURL=main.325ee5a6.chunk.js.map